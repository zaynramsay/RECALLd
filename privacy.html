import React, { useState, useEffect } from 'react';
import { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';

const PrivacyPolicy = () => {
  const [lastChecked, setLastChecked] = useState(() => {
    return localStorage.getItem('lastPrivacyCheck') || null;
  });
  const [showUpdateAlert, setShowUpdateAlert] = useState(false);
  
  const CURRENT_PRIVACY_VERSION = '2024-12-22'; // Current privacy policy date

  useEffect(() => {
    const checkPrivacyUpdate = () => {
      const lastCheck = localStorage.getItem('lastPrivacyCheck');
      if (!lastCheck) {
        localStorage.setItem('lastPrivacyCheck', CURRENT_PRIVACY_VERSION);
        return;
      }
      
      if (lastCheck !== CURRENT_PRIVACY_VERSION) {
        setShowUpdateAlert(true);
        localStorage.setItem('lastPrivacyCheck', CURRENT_PRIVACY_VERSION);
      }
    };
    
    checkPrivacyUpdate();
  }, []);

  return (
    <div className="min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800">
      {showUpdateAlert && (
        <Alert className="mb-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800">
          <AlertTitle className="text-blue-800 dark:text-blue-200">
            Privacy Policy Update
          </AlertTitle>
          <AlertDescription className="text-blue-600 dark:text-blue-300">
            Our privacy policy has been updated since your last visit. Please review the changes.
          </AlertDescription>
        </Alert>
      )}
      
      <main className="max-w-4xl mx-auto px-6 py-12">
        <a href="/" className="inline-flex items-center space-x-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 transition-colors mb-8">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" className="transition-transform group-hover:-translate-x-1">
            <path d="M15.8333 10H4.16666M4.16666 10L9.16666 15M4.16666 10L9.16666 5" 
                  stroke="currentColor" 
                  stroke-width="1.5" 
                  stroke-linecap="round" 
                  stroke-linejoin="round"/>
          </svg>
          <span>Back to Home</span>
        </a>

        <div className="space-y-12 bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-8">
          <header className="border-b border-gray-200 dark:border-gray-800 pb-6">
            <h1 className="text-4xl font-bold text-gray-900 dark:text-gray-100">Privacy Policy</h1>
            <p className="mt-2 text-gray-600 dark:text-gray-400">Last updated: December 22, 2024</p>
          </header>

          {[
            {
              title: "Information We Collect",
              content: "RECALLd is designed with your privacy in mind. We do not collect or store any personal information. The app functions by retrieving publicly available recall information from the FDA's API."
            },
            {
              title: "Use of FDA API",
              content: "Our app interacts with the FDA's public API to retrieve recall information. When making requests to this API, only the information necessary for the request (such as search parameters) is sent. No personal user data is transmitted to the FDA through this process."
            },
            {
              title: "Data Storage",
              content: "Any data stored on your device (such as your preferences or search history) is kept locally and is not transmitted to our servers or any third parties."
            }
          ].map((section, index) => (
            <section key={index} className="animate-fadeIn">
              <h2 className="text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-4">
                {section.title}
              </h2>
              <p className="text-gray-600 dark:text-gray-400 leading-relaxed">
                {section.content}
              </p>
            </section>
          ))}

          <footer className="border-t border-gray-200 dark:border-gray-800 pt-6 mt-12">
            <h2 className="text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-4">
              Contact Us
            </h2>
            <p className="text-gray-600 dark:text-gray-400">
              If you have any questions about this Privacy Policy, please contact us at{' '}
              <a 
                href="mailto:bysnapps@gmail.com"
                className="text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors"
              >
                bysnapps@gmail.com
              </a>
            </p>
          </footer>
        </div>
      </main>
    </div>
  );
};

export default PrivacyPolicy;
